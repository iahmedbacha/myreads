(this["webpackJsonpmyreads-app"]=this["webpackJsonpmyreads-app"]||[]).push([[0],{25:function(e,n,a){e.exports=a(37)},35:function(e,n,a){},36:function(e,n,a){},37:function(e,n,a){"use strict";a.r(n);var t=a(0),o=a.n(t),r=a(11),l=a(20),c=a.n(l),h=a(24),s=a(4),i=a(5),u=a(7),d=a(6),f=a(8),k=a(10),m=a(23),p=a(17),b="https://reactnd-books-api.udacity.com",O=localStorage.token;O||(localStorage.token=Math.random().toString(36).substr(-8),O=localStorage.token);var v={Accept:"application/json",Authorization:O},g=function(e,n){return fetch("".concat(b,"/books/").concat(e.id),{method:"PUT",headers:Object(p.a)({},v,{"Content-Type":"application/json"}),body:JSON.stringify({shelf:n})}).then((function(e){return e.json()}))},S=function(e){return fetch("".concat(b,"/search"),{method:"POST",headers:Object(p.a)({},v,{"Content-Type":"application/json"}),body:JSON.stringify({query:e})}).then((function(e){return e.json()})).then((function(e){return e.books}))},C=function(e){var n=e.title;return o.a.createElement("div",{className:"list-books-title"},o.a.createElement("h1",null,n))},B=function(e){var n=e.title;return o.a.createElement("h2",{className:"bookshelf-title"},n)},E=function(e){var n=e.thumbnail;return o.a.createElement("div",{className:"book-cover",style:{width:128,height:193,backgroundImage:'url("'.concat(n,'")')}})};E.defaultProps={thumbnail:""};var y=E,j=function(e){function n(){var e,a;Object(s.a)(this,n);for(var t=arguments.length,o=new Array(t),r=0;r<t;r++)o[r]=arguments[r];return(a=Object(u.a)(this,(e=Object(d.a)(n)).call.apply(e,[this].concat(o)))).handleBookShelfOnChange=function(e){(0,a.props.handleBookShelfOnChange)(e.target.value)},a}return Object(f.a)(n,e),Object(i.a)(n,[{key:"render",value:function(){var e=this.props.shelf;return o.a.createElement("div",{className:"book-shelf-changer"},o.a.createElement("select",{onChange:this.handleBookShelfOnChange,defaultValue:e},o.a.createElement("option",{value:"move",disabled:!0},"Move to..."),o.a.createElement("option",{value:"currentlyReading"},"Currently Reading"),o.a.createElement("option",{value:"wantToRead"},"Want to Read"),o.a.createElement("option",{value:"read"},"Read"),o.a.createElement("option",{value:"none"},"None")))}}]),n}(t.Component),I=function(e){var n=e.thumbnail,a=e.handleBookShelfOnChange,t=e.shelf;return o.a.createElement("div",{className:"book-top"},o.a.createElement(y,{thumbnail:n}),o.a.createElement(j,{handleBookShelfOnChange:a,shelf:t}))};I.defaultProps={thumbnail:""};var N=I,R=function(e){var n=e.title;return o.a.createElement("div",{className:"book-title"},n)},w=function(e){var n=e.authors;return o.a.createElement("div",{className:"book-authors"},n.join(", "))};w.defaultProps={authors:[]};var V=w,A=function(e){function n(){var e,a;Object(s.a)(this,n);for(var t=arguments.length,o=new Array(t),r=0;r<t;r++)o[r]=arguments[r];return(a=Object(u.a)(this,(e=Object(d.a)(n)).call.apply(e,[this].concat(o)))).handleBookShelfOnChange=function(e){var n=a.props;(0,n.handleBookShelfOnChange)(n.book,e)},a}return Object(f.a)(n,e),Object(i.a)(n,[{key:"render",value:function(){var e=this.props.book;return o.a.createElement("li",null,o.a.createElement("div",{className:"book"},o.a.createElement(N,{thumbnail:e.imageLinks&&e.imageLinks.thumbnail,handleBookShelfOnChange:this.handleBookShelfOnChange,shelf:e.shelf}),o.a.createElement(R,{title:e.title}),o.a.createElement(V,{authors:e.authors})))}}]),n}(t.Component),T=function(e){var n=e.books;return o.a.createElement("ol",{className:"books-grid"},n.map((function(n){return o.a.createElement(A,{key:n.id,book:n,handleBookShelfOnChange:e.handleBookShelfOnChange})})))},P=function(e){var n=e.books,a=e.handleBookShelfOnChange;return o.a.createElement(T,{books:n,handleBookShelfOnChange:a})},J=function(e){var n=e.title,a=e.books,t=e.handleBookShelfOnChange;return o.a.createElement("div",{className:"bookshelf"},o.a.createElement(B,{title:n}),o.a.createElement(P,{books:a,handleBookShelfOnChange:t}))},M=function(e){var n=e.handleBookShelfOnChange,a=e.books;return o.a.createElement("div",{className:"list-books-content"},o.a.createElement("div",null,o.a.createElement(J,{title:"Currently Reading",handleBookShelfOnChange:n,books:a.filter((function(e){return"currentlyReading"===e.shelf}))}),o.a.createElement(J,{title:"Want to Read",handleBookShelfOnChange:n,books:a.filter((function(e){return"wantToRead"===e.shelf}))}),o.a.createElement(J,{title:"Read",handleBookShelfOnChange:n,books:a.filter((function(e){return"read"===e.shelf}))})))},x=function(){return o.a.createElement("div",{className:"open-search"},o.a.createElement(r.b,{to:"".concat("/myreads-app","/search")},o.a.createElement("button",{type:"button"},"Add a book")))},L=function(e){var n=e.title,a=e.books,t=e.handleBookShelfOnChange;return o.a.createElement("div",{className:"list-books"},o.a.createElement(C,{title:n}),o.a.createElement(M,{books:a,handleBookShelfOnChange:t}),o.a.createElement(x,null))},W=function(e){function n(){var e,a;Object(s.a)(this,n);for(var t=arguments.length,o=new Array(t),r=0;r<t;r++)o[r]=arguments[r];return(a=Object(u.a)(this,(e=Object(d.a)(n)).call.apply(e,[this].concat(o)))).handleCloseSearch=function(){(0,a.props.handleCloseSearch)()},a}return Object(f.a)(n,e),Object(i.a)(n,[{key:"render",value:function(){return o.a.createElement(r.b,{to:"".concat("/myreads-app","/")},o.a.createElement("button",{type:"button",className:"close-search",onClick:this.handleCloseSearch},"Close"))}}]),n}(t.Component),q=function(e){function n(){var e,a;Object(s.a)(this,n);for(var t=arguments.length,o=new Array(t),r=0;r<t;r++)o[r]=arguments[r];return(a=Object(u.a)(this,(e=Object(d.a)(n)).call.apply(e,[this].concat(o)))).handleSearchBooksInputOnChange=function(e){(0,a.props.handleSearchBooksInputOnChange)(e.target.value)},a}return Object(f.a)(n,e),Object(i.a)(n,[{key:"render",value:function(){var e=this.props.searchBooksInputValue;return o.a.createElement("div",{className:"search-books-input-wrapper"},o.a.createElement("input",{type:"text",placeholder:"Search by title or author",value:e,onChange:this.handleSearchBooksInputOnChange}))}}]),n}(t.Component),z=function(e){var n=e.handleCloseSearch,a=e.searchBooksInputValue,t=e.handleSearchBooksInputOnChange;return o.a.createElement("div",{className:"search-books-bar"},o.a.createElement(W,{handleCloseSearch:n}),o.a.createElement(q,{searchBooksInputValue:a,handleSearchBooksInputOnChange:t}))},D=function(e){var n=e.books,a=e.handleBookShelfOnChange;return o.a.createElement("div",{className:"search-books-results"},o.a.createElement(T,{books:n,handleBookShelfOnChange:a}))},U=function(e){var n=e.handleCloseSearch,a=e.searchBooksInputValue,t=e.handleSearchBooksInputOnChange,r=e.books,l=e.handleBookShelfOnChange;return o.a.createElement("div",{className:"search-books"},o.a.createElement(z,{handleCloseSearch:n,searchBooksInputValue:a,handleSearchBooksInputOnChange:t}),o.a.createElement(D,{books:r,handleBookShelfOnChange:l}))},F=(a(35),function(e){function n(){var e,a;Object(s.a)(this,n);for(var t=arguments.length,o=new Array(t),r=0;r<t;r++)o[r]=arguments[r];return(a=Object(u.a)(this,(e=Object(d.a)(n)).call.apply(e,[this].concat(o)))).state={books:[],searchBooksInputValue:"",searchBooks:[]},a.searchBooks=Object(m.a)(300,(function(e){S(e).then((function(e){Array.isArray(e)?a.setState((function(n){return{searchBooks:e.map((function(e){if(n.books.filter((function(n){return n.id===e.id})).length>0)return n.books.filter((function(n){return n.id===e.id}))[0];var a=e;return a.shelf="none",a}))}})):a.setState({searchBooks:[]})}))})),a.handleCloseSearch=function(){a.setState({searchBooksInputValue:"",searchBooks:[]})},a.handleBookShelfOnChange=function(e,n){g(e,n).then((function(t){(t[n]&&t[n].includes(e.id)||"none"===n&&!t.currentlyReading.includes(e.id)&&!t.wantToRead.includes(e.id)&&!t.read.includes(e.id))&&a.setState((function(a){if("none"===n)return{books:a.books.filter((function(n){return n.id!==e.id}))};if(a.books.filter((function(n){return n.id===e.id})).length>0)return{books:a.books.map((function(a){var t=a;return t.id===e.id&&(t.shelf=n),t}))};var t=e;return t.shelf=n,{books:[].concat(Object(h.a)(a.books),[t])}}))}))},a.handleSearchBooksInputOnChange=function(e){a.setState({searchBooksInputValue:e}),""!==e?a.searchBooks(e):a.setState({searchBooks:[]})},a}return Object(f.a)(n,e),Object(i.a)(n,[{key:"componentDidMount",value:function(){var e=this;fetch("".concat(b,"/books"),{headers:v}).then((function(e){return e.json()})).then((function(e){return e.books})).then((function(n){e.setState({books:n})}))}},{key:"render",value:function(){var e=this.state,n=e.books,a=e.searchBooks,t=e.searchBooksInputValue;return o.a.createElement("div",{className:"app"},o.a.createElement(k.a,{exact:!0,path:"".concat("/myreads-app","/")},o.a.createElement(L,{title:"MyReads",books:n,handleOpenSearch:this.handleOpenSearch,handleBookShelfOnChange:this.handleBookShelfOnChange})),o.a.createElement(k.a,{path:"".concat("/myreads-app","/search")},o.a.createElement(U,{handleCloseSearch:this.handleCloseSearch,books:a,searchBooksInputValue:t,handleSearchBooksInputOnChange:this.handleSearchBooksInputOnChange,handleBookShelfOnChange:this.handleBookShelfOnChange})))}}]),n}(o.a.Component));a(36);c.a.render(o.a.createElement(r.a,null,o.a.createElement(F,null)),document.getElementById("root"))}},[[25,1,2]]]);
//# sourceMappingURL=main.c99322da.chunk.js.map